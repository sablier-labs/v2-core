createWithMilestones.t.sol
├── when the recipient is the zero address
│  └── it should revert
└── when the recipient is not the zero address
   ├── when the net deposit amount is zero
   │  └── it should revert
   └── when the net deposit amount is not zero
      ├── when the segment count is zero
      │  └── it should revert
      └── when the segment count is not zero
         ├── when the segment count is too high
         │  └── it should revert
         └── when the segment count is not too high
            ├── when the loop calculations overflow the block gas limit
            │  └── it should revert
            └── when the loop calculations do not overflow the block gas limit
               ├── when the segment amounts sum overflows
               │  └── it should revert
               └── when the segment amounts sum does not overflow
                  ├── when the segment milestones are not ordered
                  │  └── it should revert
                  └── when the segment milestones are ordered
                     ├── when the deposit amount is not equal to the segment amounts sum
                     │  └── it should revert
                     └── when the deposit amount is equal to the segment amounts sum
                        ├── when the protocol fee is too high
                        │  └── it should revert
                        └── when the protocol fee is not too high
                           ├── when the broker fee is too high
                           │  └── it should revert
                           └── when the broker fee is not too high
                              ├── when the asset is not a contract
                              │  └── it should revert
                              ├── when the asset is not a contract
                              │  └── it should revert
                              └── when the asset is a contract
                                 ├── when the asset misses the return value
                                 │  └── it should perform the ERC-20 transfers, create the stream, bump the next stream id, and mint the NFT
                                 └── when the asset is ERC-20 compliant
                                    └── it should perform the ERC-20 transfers, create the stream, bump the next stream id, record the protocol fee, mint the NFT, and emit a {CreateLockupProStream} event
